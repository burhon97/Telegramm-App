"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.als = void 0;
const async_hooks_1 = require("async_hooks");
const asyncLocalStorage = new async_hooks_1.AsyncLocalStorage();
exports.als = {
    storageImplementation: 'AsyncLocalStorage',
    get: (key) => {
        const store = asyncLocalStorage.getStore();
        return store === null || store === void 0 ? void 0 : store.get(key);
    },
    set: (key, value) => {
        const store = asyncLocalStorage.getStore();
        store === null || store === void 0 ? void 0 : store.set(key, value);
    },
    runWith: (callback, defaults) => {
        const store = defaults ? new Map(Object.entries(defaults)) : new Map();
        asyncLocalStorage.run(store, () => {
            callback();
        });
    },
};
exports.default = exports.als;
//# sourceMappingURL=als.js.map